package mvp.frontend;

import "mvp/Frontend/SessionDesc.proto";
import "mvp/Pipeline/JobDesc.proto";

message CommandMsg {
  enum CommandType {
    LAUNCH = 0;
    STATUS = 1;
    INFO = 2;
    ABORT = 3;
    KILL = 4;
    JOB = 5;
  }

  required CommandType cmd = 1;
  optional SessionDesc session = 2;
}

message CommandReplyMsg {
  required CommandMsg.CommandType cmd = 1;
  optional pipeline.JobDesc job = 2;
  optional StatusReport status_report = 3;
}

message StatusReport {
  message Entry {
    required pipeline.JobDesc job = 1;
    required double status = 2;
  }
  repeated Entry actives = 1; 
}

message StatusUpdateMsg {
  required int32 job_id = 1;
  required double status = 2; 
}

message WorkerCommandMsg {
  enum CommandType {
    WAKE = 0;
    ABORT = 1;
    KILL = 2;
  }
  required CommandType cmd = 1;
}
